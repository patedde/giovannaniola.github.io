---
import '../styles/global.css';
import CookieConsent from '../components/CookieConsent.astro';

const { 
  lang = 'it', 
  title = 'Giovanna Niola - Psicoterapeuta', 
  description = 'Sedute di psicoterapia cognitivo-comportamentale', 
  image = '/images/placeholder-hero.jpg' 
} = Astro.props;
---

<!DOCTYPE html>
<html lang={lang} class="bg-white text-slate-900">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={image} />
    <link rel="icon" href="/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Lora:wght@500;600&display=swap" rel="stylesheet">
  </head>
  <body class="min-h-screen flex flex-col font-sans">
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-emerald-600 text-white px-4 py-2 rounded">
      {lang === 'it' ? 'Vai al contenuto' : 'Skip to content'}
    </a>

    <header class="border-b">
      <div class="max-w-5xl mx-auto px-4 py-4 flex items-center justify-between">
        <a href={lang === 'it' ? '/it/' : '/en/'} class="font-serif text-xl hover:text-emerald-600 transition-colors">
          Giovanna Niola
        </a>
        
        <nav class="hidden md:flex items-center gap-6">
          <a class="hover:underline hover:text-emerald-600 transition-colors" href={lang === 'it' ? '/it/about' : '/en/about'}>
            {lang === 'it' ? 'Chi sono' : 'About'}
          </a>
          <a class="hover:underline hover:text-emerald-600 transition-colors" href={lang === 'it' ? '/it/cbt' : '/en/cbt'}>
            {lang === 'it' ? "Cos'è la CBT" : "What's CBT"}
          </a>
          <a class="hover:underline hover:text-emerald-600 transition-colors" href={lang === 'it' ? '/it/faq' : '/en/faq'}>
            FAQ
          </a>
          <a class="hover:underline hover:text-emerald-600 transition-colors" href={lang === 'it' ? '/it/privacy' : '/en/privacy'}>
            {lang === 'it' ? 'Privacy' : 'Privacy'}
          </a>
          <slot name="langswitch" />
        </nav>

        <button 
          id="mobile-menu-button" 
          class="md:hidden p-2 hover:bg-slate-100 rounded"
          aria-label={lang === 'it' ? 'Menu' : 'Menu'}
          aria-expanded="false"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>

      <nav id="mobile-menu" class="hidden md:hidden border-t">
        <div class="max-w-5xl mx-auto px-4 py-4 flex flex-col gap-4">
          <a class="hover:text-emerald-600 transition-colors" href={lang === 'it' ? '/it/about' : '/en/about'}>
            {lang === 'it' ? 'Chi sono' : 'About'}
          </a>
          <a class="hover:text-emerald-600 transition-colors" href={lang === 'it' ? '/it/cbt' : '/en/cbt'}>
            {lang === 'it' ? "Cos'è la CBT" : "What's CBT"}
          </a>
          <a class="hover:text-emerald-600 transition-colors" href={lang === 'it' ? '/it/faq' : '/en/faq'}>
            FAQ
          </a>
          <a class="hover:text-emerald-600 transition-colors" href={lang === 'it' ? '/it/privacy' : '/en/privacy'}>
            {lang === 'it' ? 'Privacy' : 'Privacy'}
          </a>
          <slot name="langswitch-mobile" />
        </div>
      </nav>
    </header>

    <main id="main-content" class="flex-1">
      <slot />
    </main>

    <footer class="border-t bg-slate-50">
      <div class="max-w-5xl mx-auto px-4 py-8 text-sm">
        <p><strong>Giovanna Niola</strong> - Psicoterapeuta cognitivo-comportamentale • Iscrizione: 1/SPS, Albo degli Psicologi Sardegna</p>
        <p class="mt-1">Email: <a href="mailto:giovannaniola@gmail.com" class="underline hover:text-emerald-600">giovannaniola@gmail.com</a> • Telefono: +39 351 863 5200</p>
        <p class="mt-1">P.IVA 03035450901</p>
        <p class="mt-2 text-slate-600">© {new Date().getFullYear()} Giovanna Niola</p>
      </div>
    </footer>

    <script is:inline>
      // Mobile menu toggle
      const menuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');
      
      if (menuButton && mobileMenu) {
        menuButton.addEventListener('click', () => {
          const isHidden = mobileMenu.classList.contains('hidden');
          mobileMenu.classList.toggle('hidden');
          menuButton.setAttribute('aria-expanded', isHidden ? 'true' : 'false');
        });
      }
    </script>

    <CookieConsent lang={lang} />
    
  </body>
</html>
